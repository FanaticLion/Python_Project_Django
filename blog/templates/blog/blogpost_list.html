{% extends 'blog/base.html' %}

{% block title %}Список статей блога{% endblock %}

{% block content %}
<h1>Статьи блога</h1>
<a href="{% url 'blog:post_create' %}">Создать новую статью</a>

{% for post in posts %}
    <div class="post">
        <h2><a href="{% url 'blog:post_detail' post.pk %}">{{ post.title }}</a></h2>
        <p>{{ post.content|truncatewords:30 }}</p>
        <p>Дата: {{ post.created_at|date:"d.m.Y" }}</p>
        <p>Просмотры: {{ post.views_count }}</p>
        {% if post.preview %}
            <img src="{{ post.preview.url }}" alt="{{ post.title }}" width="200">
        {% endif %}
    </div>
{% empty %}
    <p>Пока нет статей.</p>
{% endfor %}
{% endblock %}